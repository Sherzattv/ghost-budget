# План аварийного отката (Rollback Plan)

Этот документ описывает шаги по отмене изменений, внесенных веткой `feature/debts-management`.

> **ВАЖНО:** Перед любыми действиями убедитесь, что у вас есть резервная копия важных данных.

---

## 1. Откат изменений в Git (Codebase)

Если вы слили ветку в `main` или `develop` и хотите отменить это слияние.

### Сценарий А: Отмена последнего Merge-коммита (безопасно)
Используйте эту команду, если merge был последним действием. Это создаст новый коммит "Revert ...", сохраняя историю.

```bash
# 1. Перейдите в нужную ветку (например, main)
git checkout main

# 2. Создайте коммит отмены
# -m 1 означает, что мы возвращаемся к состоянию ветки main до слияния
git revert -m 1 HEAD

# 3. Отправьте изменения
git push origin main
```

### Сценарий Б: Жесткий сброс (ОПАСНО)
Используйте, только если никто другой не успел скачать обновления.

```bash
# 1. Найдите хеш коммита ДО слияния
git log --oneline

# 2. Сбросьте ветку назад
git reset --hard <HASH_ДО_СЛИЯНИЯ>

# 3. Принудительная отправка
git push origin main --force
```

---

## 2. Откат изменений в Базе Данных (Supabase)

В этой версии мы добавили колонку `friend_balance`.

### SQL для отката базы
Выполните этот запрос в SQL Editor в Supabase:

```sql
ALTER TABLE accounts DROP COLUMN IF EXISTS friend_balance;
```

---

## 3. Чек-лист

1. [ ] Выполнить `git revert` в ветке `main`.
2. [ ] Выполнить SQL удаления колонки.
3. [ ] Очистить кэш браузера и проверить работу сайта.
